@model AdminDashboardViewModel
@{
    ViewData["Title"] = "Admin Dashboard";
}
<div class="row mb-4">
    <div class="col-lg-4">
        <div class="card-ontime kpi-card">
            <div class="card-body">
                <i class="fas fas fa-users"></i>
                <div>
                    <span class="count">@Model.TotalUsers</span>
                    <span class="title">Total Users</span>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card-returned kpi-card">
            <div class="card-body">
                <i class="fas fa-book-open"></i>
                <div>
                    <span class="count">@Model.TotalBooks</span>
                    <span class="title">Total Books</span>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card-due kpi-card">
            <div class="card-body">
                <i class="fas fa-layer-group"></i>
                <div>
                    <span class="count">@Model.TotalCollections</span>
                    <span class="title">Total Collections</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card shadow-sm">
            <div class_models="card-header">User Collection Count</div>
            <div class_models="card-body">
                <div id="pieUserCollections" style="height: 350px;"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 mb-4">
        <div class="card shadow-sm">
            <div class_models="card-header">User Book Count</div>
            <div class_models="card-body">
                <div id="barUserBooks" style="height: 350px;"></div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12 mb-4">
        <div class="card shadow-sm">
            <div class_models="card-header">Platform: Books Added Over Time</div>
            <div class_models="card-body">
                <div id="linePlatformBooks" style="height: 400px;"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-12 mb-4">
        <div class="card shadow-sm">
            <div class_models="card-header">Platform: Collections Created Over Time</div>
            <div class_models="card-body">
                <div id="linePlatformCollections" style="height: 400px;"></div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    @* (ملف JS جديد خاص بالداشبورد ده) *@
    <script src="~/js/admin-dashboard.js" asp-append-version="true"></script>

    <script>
        $(document).ready(function () {
            const data = @Html.Raw(Json.Serialize(Model));
            initAdminDashboard(data);
        });
    </script>
}