@model Biblio.Models.ViewModels.CollectionDetailsViewModel
@{
    ViewData["Title"] = Model.CollectionName;
}

<div class="d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
    <div>
        <h3 class="display-5 lead text-muted">@Model.CollectionDescription</h3>
    </div>
    <div class="modal-actions flex-shrink-0 ms-3">
        <a asp-action="Index" class="btn btn-outline-secondary " style="padding: 6px 12px;margin-top: 15px; margin-bottom: 15px;">
            <i class="fas fa-arrow-left"></i>
        </a>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card shadow-sm">
            <div id="kpiTotalBooks"></div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card shadow-sm">
            <div id="kpiTotalCopies"></div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card shadow-sm">
            <div class="card-header">
                Books by Status (Unique)
            </div>
            <div class="card-body">
                <div id="statusPieChart" style="height: 350px;"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card shadow-sm">
            <div class="card-header">
                Rating Distribution
            </div>
            <div class="card-body">
                <div id="ratingHistogramChart" style="height: 350px;"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-12 mb-4">
        <div class="card shadow-sm">
            <div class="card-header">
                Books Added Over Time
            </div>
            <div class="card-body">
                <div id="dateTimelineChart" style="height: 400px;"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-12 mb-4">
        <div class="card shadow-sm">
            <div class="card-header">
                Top 10 Books by Copies
            </div>
            <div class="card-body">
                <div id="copiesBarChart" style="height: 400px;"></div>
            </div>
        </div>
    </div>

    <div class="col-lg-12 mb-4">
        <div class="card shadow-sm">
            <div class="card-header">
                Top 10 Most Valuable Books (Est.)
            </div>
            <div class="card-body">
                <div id="priceBarChart" style="height: 400px;"></div>
            </div>
        </div>
    </div>
</div>

@* (4) الـ Scripts *@
@section Scripts {
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    @* (هنعمل ملف JS جديد ومنفصل لدي) *@
    <script src="~/js/collection-details.js" asp-append-version="true"></script>

    <script>
        // "الجسر"
        $(document).ready(function () {
            const data = @Html.Raw(Json.Serialize(Model));
            initCollectionDetailsDashboard(data);
        });
    </script>
}