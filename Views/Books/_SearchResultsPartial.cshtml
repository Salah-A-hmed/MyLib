@model IEnumerable<Biblio.Models.ViewModels.BookCreateViewModel>

@if (!Model.Any())
{
    <div class="text-center p-5">
        <h4 class="text-muted">No results found.</h4>
        <p>Try checking the spelling or use a different keyword.</p>
    </div>
}
else
{
    <div class="book flex flex-col gap-3">
        @foreach (var book in Model)
        {
            var bookJson = System.Text.Json.JsonSerializer.Serialize(book);

            @* ده نفس الـ Card styling بتاع صفحة Index
              بس مع تغيير الأزرار لـ "Add this Item"
            *@
            <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-4">
                <div class="flex flex-col md:flex-row gap-4">

                    <div class="flex-shrink-0 text-center">
                        <img src="@(string.IsNullOrEmpty(book.CoverImageUrl) ? "/img/missing.png" : book.CoverImageUrl)"
                             alt="@book.Title"
                             class="w-32 h-48 object-cover rounded shadow-md"
                             onerror="this.src='@Url.Content("~/img/missing.png")';" />
                    </div>

                    <div class="flex-grow">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-xl font-bold text-gray-900 mb-1">@book.Title</h3>
                                <p class="text-md text-gray-600 text-left">@book.Author</p>
                            </div>

                            @* ده زرار الإضافة اللي بيفضل موجود *@
                            <div class="text-end" style="min-width: 120px;">
                                <button class="btn btn-submit add-book-btn"
                                        data-book='@Html.Raw(bookJson)'>
                                    <i class="fas fa-plus-circle"></i> Add this Item
                                </button>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-x-3 gap-y-1 text-sm text-gray-600 mb-3 text-left">
                            @if (book.PublishYear.HasValue)
                            {
                                <span class="font-semibold text-black">@book.PublishYear</span>
                            }
                            @if (book.Pages.HasValue)
                            {
                                <span>@book.Pages pages</span>
                            }
                            @if (!string.IsNullOrEmpty(book.Publisher))
                            {
                                <span>(@book.Publisher)</span>
                            }
                        </div>

                        @if (!string.IsNullOrEmpty(book.ISBN))
                        {
                            <div class="text-sm text-gray-700 mb-3 text-left">
                                <span class="font-semibold text-black">ISBN:</span> @book.ISBN
                            </div>
                        }

                        <div class="border-t border-gray-200 pt-3 text-left">
                            <p class="text-xs text-gray-700 leading-relaxed text-left"
                               style="max-height: 75px; overflow: hidden; text-overflow: ellipsis;">
                                @book.Description
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}