@using Microsoft.AspNetCore.Identity
@inject SignInManager<AppUser> SignInManager

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblio | @ViewData["Title"]</title>

    <script src="https://cdn.jsdelivr.net/npm/@@tailwindcss/browser@4"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="~/css/pages.css">

</head>

<body class="!bg-[#f8f9fa]">

    <nav class="!bg-[#2C3E50] !py-4 !px-[4%] !sticky !top-0 !z-50 !shadow-lg">
        <div class="!flex !items-center !justify-between !max-w-7xl !mx-auto">
            <a asp-controller="Home" asp-action="Index" class="!flex !items-center !gap-3 !no-underline">
                <img src="~/img/logo.png" alt="Biblio Logo" class="!w-12 !h-12">
                <h1 class="!text-white !text-2xl !font-bold !mb-0">Biblio</h1>
            </a>

            <div class="!hidden md:!flex !items-center !gap-6">
                <a asp-controller="Home" asp-action="Index" class="!text-white/80 hover:!text-[#4bc1d2] !transition-colors !no-underline !font-medium">Home</a>
                <a asp-controller="Home" asp-action="Features" class="!text-white/80 hover:!text-[#4bc1d2] !transition-colors !no-underline !font-medium">Features</a>
                <a asp-controller="Home" asp-action="Catalog" class="!text-white/80 hover:!text-[#4bc1d2] !transition-colors !no-underline !font-medium">Catalog</a>
                <a asp-controller="Home" asp-action="Events" class="!text-white/80 hover:!text-[#4bc1d2] !transition-colors !no-underline !font-medium">Events</a>
                <a asp-controller="Home" asp-action="Contact" class="!text-white/80 hover:!text-[#4bc1d2] !transition-colors !no-underline !font-medium">Contact</a>
            </div>
            @if (SignInManager.IsSignedIn(User))
            {
                <a asp-controller="Books" asp-action="Index" class="!bg-[#4bc1d2] !text-white !px-6 !py-2 !rounded-full hover:!bg-[#3daebf] !transition-all !shadow-md !no-underline !font-semibold">My Library</a>
            }
            else
            {
                <a asp-area="Identity" asp-page="/Account/Login" class="!text-white hover:!text-[#4bc1d2] !transition-colors !no-underline !font-medium">Log In</a>
                <a asp-area="Identity" asp-page="/Account/Register" class="!bg-[#4bc1d2] !text-white !px-6 !py-2 !rounded-full hover:!bg-[#3daebf] !transition-all !shadow-md !no-underline !font-semibold">Get Started</a>
            }
            <button id="mobileMenuBtn" class="md:!hidden !text-white !text-2xl !bg-transparent !border-0">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div id="mobileMenu" class="!hidden !absolute !top-full !left-0 !w-full !bg-[#2C3E50] !border-t !border-white/10 !py-4 !px-[4%] !shadow-xl md:!hidden">
            <div class="!flex !flex-col !gap-4">
                <a asp-controller="Home" asp-action="Index" class="!text-white/80 hover:!text-[#4bc1d2] !no-underline">Home</a>
                <a asp-controller="Home" asp-action="Features" class="!text-white/80 hover:!text-[#4bc1d2] !no-underline">Features</a>
                <a asp-controller="Home" asp-action="Catalog" class="!text-white/80 hover:!text-[#4bc1d2] !no-underline">Catalog</a>
                <a asp-controller="Home" asp-action="Contact" class="!text-white/80 hover:!text-[#4bc1d2] !no-underline">Contact</a>
                <hr class="!border-white/10">
                @if (SignInManager.IsSignedIn(User))
                {
                    <a asp-controller="Books" asp-action="Index" class="!text-[#4bc1d2] !font-semibold !no-underline">My Library</a>
                }
                else
                {
                    <a asp-area="Identity" asp-page="/Account/Login" class="!text-white/80 hover:!text-[#4bc1d2] !no-underline">Log In</a>
                    <a asp-area="Identity" asp-page="/Account/Register" class="!text-[#4bc1d2] !font-semibold !no-underline">Get Started</a>
                }
            </div>
        </div>
    </nav>

    <main>
        @RenderBody()
    </main>

    <footer class="!py-10 !px-[6%] !bg-[#2C3E50]">
        <div class="!max-w-6xl !mx-auto">
            <div class="!flex !flex-col md:!flex-row !items-center !justify-between !gap-6">
                <div class="!flex !items-center !gap-3">
                    <img src="~/img/logo.png" alt="Biblio Logo" class="!w-10 !h-10">
                    <h3 class="!text-xl !font-bold !text-white !mb-0">Biblio</h3>
                </div>
                <p class="!text-white/70 !mb-0">&copy; @DateTime.Now.Year Biblio. All rights reserved.</p>
                <div class="!flex !items-center !gap-4">
                    <a href="#" class="!text-white/70 hover:!text-white !transition-colors"><i class="fab fa-facebook !text-xl"></i></a>
                    <a href="#" class="!text-white/70 hover:!text-white !transition-colors"><i class="fab fa-twitter !text-xl"></i></a>
                    <a href="#" class="!text-white/70 hover:!text-white !transition-colors"><i class="fab fa-instagram !text-xl"></i></a>
                </div>
            </div>
            <div class="!mt-8 !pt-8 !border-t !border-white/10 !flex !justify-center !gap-6 !text-sm">
                <a asp-action="DataProtection" class="!text-white/60 hover:!text-[#4bc1d2] !no-underline">Privacy Policy</a>
                <a asp-action="UserAgreement" class="!text-white/60 hover:!text-[#4bc1d2] !no-underline">Terms of Service</a>
                <a asp-action="CookiePreferences" class="!text-white/60 hover:!text-[#4bc1d2] !no-underline">Cookies</a>
            </div>
        </div>
    </footer>

    <script>
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');

        if(mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('!hidden');
            });
        }
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>