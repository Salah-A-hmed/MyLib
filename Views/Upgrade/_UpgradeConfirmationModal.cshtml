@model Biblio.Models.ViewModels.UpgradeModalViewModel
@using Microsoft.AspNetCore.Identity
@inject SignInManager<AppUser> SignInManager

<div class="modal fade" id="upgradeConfirmationModal" tabindex="-1" aria-labelledby="upgradeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content !bg-white rounded-4 !max-w-md !w-full !shadow-2xl !transform !transition-all">
            <div class="!text-center m-3">
                <div class="!inline-flex align-items-center !justify-center !w-16 !h-16 !bg-[#4bc1d2] !rounded-full !mb-4 mt-3">
                    <i class="fas fa-crown !text-white !text-2xl"></i>
                </div>
                <h3 class="!text-2xl !font-bold !text-[#2C3E50] !mb-2">Upgrade to Library Pro</h3>
                <span class="small text-muted mt-2">You're about to be @Model.BillingText until you Downgrade</span>
            </div>
            <div class="modal-body !space-y-4 !mb-0">
                <div class="!flex !items-center !justify-between p-3 !bg-[#E8EFF3] !rounded-lg">
                    <span class="!text-[#34495E] !font-semibold">Plan</span>
                    <span class="!text-[#2C3E50] !font-bold">Library Pro (@Model.PayingPlanType)</span>
                </div>
                <div class="!flex !items-center !justify-between p-3 !bg-[#E8EFF3] !rounded-lg">
                    <span class="!text-[#34495E] !font-semibold">Price</span>
                    <span class="!text-[#2C3E50] !font-bold">@Model.Price.ToString("C0")@Model.Period</span>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn !flex-1 !py-3 !px-6 !bg-[#E8EFF3] !text-[#34495E] !rounded-lg !font-semibold !transition-all hover:!bg-gray-200" data-bs-dismiss="modal">Cancel</button>
                <form id="confirmUpgradeForm" method="post" action="@Model.ActionUrl?payingPlanType=@Model.PayingPlanType" style="display: inline;">
                    @Html.AntiForgeryToken()
                    <input type="hidden" id="selectedPlanType" name="planType" value="@Model.PayingPlanType" />
                    <button type="submit" id="modalConfirmUpgradeBtn" class="!flex-1 !py-3 !px-6 !bg-[#4bc1d2] !text-white !rounded-lg !font-semibold !transition-all hover:!bg-[#0096b5]">
                        Confirm Payment
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>