@model IEnumerable<Biblio.Models.ViewModels.VisitorIndexViewModel>

@{
    ViewData["Title"] = "Visitors";
}
<style>
    .content-area {
        padding-left: 0px;
        padding-right: 0px;
    }
</style>

<p>
    <a asp-action="Create" class="btn btn-submit">
		<i class="fas fa-plus-circle"></i>
        New Visitor
    </a>
</p>

<div class="table-container card shadow-sm">
    <table class="table-content">
        <thead class="table-header">
            <tr>
                <th class="header-cell">@Html.DisplayNameFor(model => model.Visitor.Name)</th>
                <th class="header-cell"><i class="fas fa-envelope fa-fw me-2"></i>@Html.DisplayNameFor(model => model.Visitor.Email)</th>
                <th class="header-cell"><i class="fas fa-phone fa-fw me-2"></i>@Html.DisplayNameFor(model => model.Visitor.Phone)</th>
                <th class="header-cell">Total Overdue Fines</th>
                <th class="header-cell"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var vm in Model)
            {

                @* --- (التعديل هنا) ---
               دمجنا كل الكلاسات في "class" واحدة بس
            *@
                <tr class="table-row clickable-row @(vm.TotalFines > 0 ? "overdue-row" : "")"
                    data-href="@Url.Action("Details", new { id = vm.Visitor.ID })">

                    <td class="data-cell">
                        @Html.DisplayFor(modelItem => vm.Visitor.Name)
                    </td>
                    <td class="data-cell">
                        @Html.DisplayFor(modelItem => vm.Visitor.Email)
                    </td>
                    <td class="data-cell">
                        @Html.DisplayFor(modelItem => vm.Visitor.Phone)
                    </td>
                    <td class="data-cell">
                        @if (vm.TotalFines > 0)
                        {
                            <span class="status-badge status-overdue">
                                @vm.TotalFines.ToString("C", new System.Globalization.CultureInfo("en-EG"))
                            </span>
                        }
                        else
                        {
                            <span class="status-badge status-returned">
                                No Fines
                            </span>
                        }
                    </td>
                    <td class="data-cell actions-cell">
                        <button type="button" class="btn btn-icon-danger"
                                data-bs-toggle="modal"
                                data-bs-target="#DeleteConfirmationModal"
                                data-delete-url="@Url.Action("DeleteConfirmed", "Visitors", new { id = vm.Visitor.ID })"
                                data-entity-name="@vm.Visitor.Name"
                                title="Delete @vm.Visitor.Name">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>